- name: ðŸš€ Deploy to Oracle VM
  run: |
    ssh -o StrictHostKeyChecking=no ubuntu@140.245.27.38 << 'EOF'
      echo "ðŸ”„ Pulling latest changes"
      cd ~/BRV1/brv-app || mkdir -p ~/BRV1/brv-app && cd ~/BRV1/brv-app
      if [ -d ".git" ]; then
        git pull origin main
      else
        git clone https://github.com/Aarav500/brv-app.git .
      fi

      echo "ðŸ§¼ Cleaning up old Docker containers and images"
      docker-compose -f brv-app/docker-compose.yml down
      docker system prune -af || true
      docker rmi \$(docker images -q) -f || true

      echo "ðŸ³ Rebuilding Docker"
      docker-compose -f brv-app/docker-compose.yml build --no-cache
      docker-compose -f brv-app/docker-compose.yml up -d
    EOF
